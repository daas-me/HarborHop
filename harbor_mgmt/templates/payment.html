{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - HarborHop</title>
    <link href="https://fonts.googleapis.com/css2?family=Alan+Sans:wght@300..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/payment.css' %}?v=2">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon_io/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon_io/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon_io/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'images/favicon_io/site.webmanifest' %}">
    <script src="https://kit.fontawesome.com/1256e3cde2.js" crossorigin="anonymous"></script>
</head>
<body>
     <header>
    <div class="logo-container">
        <a href="{% url 'home' %}" class="logo">HARBOR<span>hop</span></a>
        <p class="tagline">Hop aboard. Sail beyond</p>
    </div>
    <nav>
        <a href="{% url 'home' %}">Home</a>
        {% if user.is_authenticated %}
            <!-- Admin Dashboard Button - Only visible to admin users -->
            {% if user.profile.is_admin_user %}
                <a href="{% url 'admin_dashboard' %}" class="admin-dashboard-link">
                    <i class="fa-solid fa-chart-line dashboard-icon"></i> Admin Access
                </a>
            {% endif %}
           <a href="{% url 'reservations' %}">Manage Booking</a>
                <a href="{% url 'latest_offer' %}">Latest Offers</a>
                <a href="{% url 'contact_us' %}">Contact Us</a>
                <div class="nav-divider"></div>
                <a href="#" class="language-link">PH</a>
                <span class="language-separator">|</span>
                <a href="#" class="language-link">EN</a>
                <a href="{% url 'profile_settings' %}" class="user-name-btn">{{ user.username }}</a>
                <a href="{% url 'logout' %}" class="login-btn">Log out</a>
            {% else %}
                <a href="{% url 'latest_offer' %}">Latest Offers</a>
                <a href="{% url 'contact_us' %}" class="contact-btn">Contact Us</a>
                <div class="nav-divider"></div>
                <a href="#" class="language-link">PH</a>
                <span class="language-separator">|</span>
                <a href="#" class="language-link">EN</a>
                <a href="{% url 'login' %}" class="login-btn">Log In</a>
            {% endif %}
    </nav>
</header>

    <div class="payment-wrapper">
        <div class="page-title">
            <h1><i class="fa-solid fa-credit-card"></i> Complete Your Payment</h1>
            <p>You're almost there! Review your booking and complete payment.</p>
        </div>

        <!-- Progress Steps -->
        <div class="progress-steps">
            <div class="steps step-3">
                <div class="step completed">
                    <div class="step-number">1</div>
                    <div class="step-label">Schedules</div>
                </div>
                <div class="step completed">
                    <div class="step-number">2</div>
                    <div class="step-label">Passenger Info</div>
                </div>
                <div class="step active">
                    <div class="step-number">3</div>
                    <div class="step-label">Payment</div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-label">Complete</div>
                </div>
            </div>
        </div>

        <div class="payment-container">
            <!-- Left Side - Booking Summary -->
            <div class="booking-summary-card">
                <div class="summary-header">
                    <i class="fa-solid fa-ticket"></i>
                    <div>
                        <h2>Booking Summary</h2>
                        <p>Reference: <strong>{{ booking.booking_reference }}</strong></p>
                    </div>
                </div>

                <!-- Trip Route -->
                <div class="trip-route">
                    <div class="route-item">
                        <i class="fa-solid fa-location-dot"></i>
                        <span>{{ booking.origin }}</span>
                    </div>
                    <div class="route-arrow">
                        <i class="fa-solid fa-arrow-right"></i>
                        {% if route_distance %}
                            <span class="distance">{{ route_distance }} km</span>
                        {% endif %}
                    </div>
                    <div class="route-item">
                        <i class="fa-solid fa-location-dot"></i>
                        <span>{{ booking.destination }}</span>
                    </div>
                </div>

                <!-- Outbound Trip Details -->
                {% if booking.details.outbound %}
                <div class="journey-card outbound">
                    <div class="journey-header">
                        <i class="fa-solid fa-plane-departure"></i>
                        <span>Departure Journey</span>
                    </div>
                    <div class="journey-details">
                        <div class="detail-row">
                            <div class="detail-item">
                                <i class="fa-solid fa-ship"></i>
                                <div>
                                    <span class="label">Company</span>
                                    <span class="value">{{ booking.details.outbound.company }}</span>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fa-solid fa-ferry"></i>
                                <div>
                                    <span class="label">Vessel</span>
                                    <span class="value">{{ booking.details.outbound.vessel }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item">
                                <i class="fa-solid fa-calendar-day"></i>
                                <div>
                                    <span class="label">Date</span>
                                    <span class="value">{{ booking.details.outbound.departureDate }}</span>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fa-solid fa-clock"></i>
                                <div>
                                    <span class="label">Time</span>
                                    <span class="value">{{ booking.details.outbound.departureTime }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item">
                                <i class="fa-solid fa-couch"></i>
                                <div>
                                    <span class="label">Accommodation</span>
                                    <span class="value">{{ booking.details.outbound.accommodationName }}</span>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fa-solid fa-chair"></i>
                                <div>
                                    <span class="label">Seat Type</span>
                                    <span class="value">{{ booking.details.outbound.seatType }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="price-row">
                            <span>Price</span>
                            <span class="price">₱{{ booking.details.outbound.price|floatformat:2 }}</span>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Return Trip Details -->
                {% if booking.details.return %}
                <div class="journey-card return">
                    <div class="journey-header">
                        <i class="fa-solid fa-plane-arrival"></i>
                        <span>Return Journey</span>
                    </div>
                    <div class="journey-details">
                        <div class="detail-row">
                            <div class="detail-item">
                                <i class="fa-solid fa-ship"></i>
                                <div>
                                    <span class="label">Company</span>
                                    <span class="value">{{ booking.details.return.company }}</span>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fa-solid fa-ferry"></i>
                                <div>
                                    <span class="label">Vessel</span>
                                    <span class="value">{{ booking.details.return.vessel }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item">
                                <i class="fa-solid fa-calendar-day"></i>
                                <div>
                                    <span class="label">Date</span>
                                    <span class="value">{{ booking.details.return.departureDate }}</span>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fa-solid fa-clock"></i>
                                <div>
                                    <span class="label">Time</span>
                                    <span class="value">{{ booking.details.return.departureTime }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item">
                                <i class="fa-solid fa-couch"></i>
                                <div>
                                    <span class="label">Accommodation</span>
                                    <span class="value">{{ booking.details.return.accommodationName }}</span>
                                </div>
                            </div>
                            <div class="detail-item">
                                <i class="fa-solid fa-chair"></i>
                                <div>
                                    <span class="label">Seat Type</span>
                                    <span class="value">{{ booking.details.return.seatType }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="price-row">
                            <span>Price</span>
                            <span class="price">₱{{ booking.details.return.price|floatformat:2 }}</span>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Passengers Info -->
                <div class="passengers-info">
                    <i class="fa-solid fa-users"></i>
                    <div>
                        <span class="label">Passengers</span>
                        <span class="value">
                            {{ booking.adults }} Adult(s)
                            {% if booking.children > 0 %} • {{ booking.children }} Child(ren){% endif %}
                            {% if booking.details.infants %} • {{ booking.details.infants }} Infant(s){% endif %}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Right Side - Payment Form -->
            <div class="payment-form-card">
                <div class="payment-header">
                    <h3><i class="fa-solid fa-wallet"></i> Payment Details</h3>
                </div>

                <div class="total-amount-display">
                    <span class="amount-label">Total Amount</span>
                    <span class="amount-value">₱{{ booking.total_price|floatformat:2 }}</span>
                </div>

                <form method="post" class="payment-form">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label><i class="fa-solid fa-credit-card"></i> Payment Method</label>
                        <div class="payment-methods">
                            <label class="payment-method-option">
                                <input type="radio" name="payment_method" value="gcash" checked>
                                <div class="method-card">
                                    <i class="fa-solid fa-wallet"></i>
                                    <span>GCash</span>
                                </div>
                            </label>
                            <label class="payment-method-option">
                                <input type="radio" name="payment_method" value="credit_card">
                                <div class="method-card">
                                    <i class="fa-solid fa-credit-card"></i>
                                    <span>Credit Card</span>
                                </div>
                            </label>
                            <label class="payment-method-option">
                                <input type="radio" name="payment_method" value="paypal">
                                <div class="method-card">
                                    <i class="fa-brands fa-paypal"></i>
                                    <span>PayPal</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="payment-info-box">
                        <i class="fa-solid fa-shield-halved"></i>
                        <div>
                            <strong>Secure Payment</strong>
                            <p>Your payment information is encrypted and secure.</p>
                        </div>
                    </div>

                    <!-- Ticket Rules Summary -->
                    <div class="ticket-rules-box">
                        <div class="rules-header">
                            <i class="fa-solid fa-clipboard-list"></i>
                            <strong>Important Ticket Rules</strong>
                        </div>
                        <ul class="rules-list">
                            <li><strong>Check-in:</strong> Arrive at least 2 hours before departure</li>
                            <li><strong>Valid ID Required:</strong> Present valid ID for boarding</li>
                            <li><strong>Ticket Validity:</strong> Valid only for the voyage indicated</li>
                            <li><strong>Refund/Reschedule:</strong> Within 60 days from departure, subject to surcharge</li>
                            <li><strong>Baggage:</strong> 2 bags (0.05 cubic meter or 100kg) for 2nd class/tourist</li>
                        </ul>
                        <a href="#" class="view-full-rules" onclick="openRulesModal(event)">
                            <i class="fa-solid fa-file-lines"></i> View Full Ticket Rules & Conditions
                        </a>
                    </div>

                    <div class="form-actions">
                        <a href="javascript:history.back()" class="btn-back">
                            <i class="fa-solid fa-arrow-left"></i> Back
                        </a>
                        <button type="submit" class="btn-pay">
                            <i class="fa-solid fa-lock"></i> Complete Payment
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">
                    <div class="logo-text">HARBOR<span class="highlight">hop</span></div>
                    <p class="tagline">Hop Aboard. Sail Beyond</p>
                </div>
                <p style="color: #2c3e50; margin-top: 20px;">Experience the best cruise booking platform with exclusive deals and premium customer service.</p>
            </div>

            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="{% url 'home' %}">Home</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Contact Us</h4>
                <div class="contact-info">
                    <p><i class="fa-solid fa-envelope"></i> Steven@harborhop.com</p>
                    <p><i class="fa-solid fa-phone"></i> +1 (555) 123-4567</p>
                    <p><i class="fa-solid fa-location-dot"></i> 123 Marina Blvd, Beach City, CA</p>
                </div>
            </div>

            <div class="footer-section">
                <h4>Connect With Us</h4>
                <div class="social-media">
                    <a href="#" title="Facebook">
                        <img src="https://cdn-icons-png.flaticon.com/512/124/124010.png" alt="Facebook">
                    </a>
                    <a href="#" title="Twitter">
                        <img src="https://cdn-icons-png.flaticon.com/512/3256/3256013.png" alt="Twitter">
                    </a>
                    <a href="#" title="Instagram">
                        <img src="https://cdn-icons-png.flaticon.com/512/174/174855.png" alt="Instagram">
                    </a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 HarborHop. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
        </div>
    </footer>

    <!-- Ticket Rules Modal -->
    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fa-solid fa-clipboard-list"></i> Ticket Rules & Conditions</h2>
                <button class="modal-close" onclick="closeRulesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <ol class="full-rules-list">
                    <li>Ticket is non-transferable and shall be used solely by Passenger named herein. Passenger is required to present a valid ID upon check-in or may be refused boarding if can not present.</li>
                    
                    <li>Ticket is valid only for the voyage indicated herein and shall be deemed automatically canceled if not used. In cases wherein the Passenger was unable to use the ticket, the ticket may still be refunded or rescheduled within sixty (60) days from date of departure, subject to surcharge.</li>
                    
                    <li>Passenger must be at the Passenger Terminal for check-in at least two (2) hours before departure time. Carrier reserves the right to cancel the ticket of any Passenger who fails to check-in thirty (30) minutes before scheduled departure and may issue the same accommodation to another person.</li>
                    
                    <li>Passenger undertakes to faithfully comply with the rules and regulations of the Carrier involving the maintenance of peace and order, safety, and sanitation on board the vessel.</li>
                    
                    <li>Passenger voluntarily agrees that Carrier shall not be liable for death, injury, or delay to the Passenger and/or loss, damage, or delay to any baggage due to any fortuitous event, war, rebellion, strike, acts of terrorism, navigational requirements, government intervention, and other causes beyond the control of the Carrier. It is agreed that the term "baggage" shall mean only such thing that is necessary for the personal use of the Passenger during the voyage, excluding all money, jewelry, merchandise, securities, and other articles of similar nature, for which the Carrier shall not be liable for unless transported under a Bill of Lading. The liability of the Carrier in case of loss, damage, or delay to the Passenger's baggage shall be limited to Five Hundred Pesos (₱500.00) for First Class passengers and a reduced proportion thereof in the case of all other passengers. Carrier shall have no liability whatsoever in connection with this voyage unless a written notice of claim is presented to the Carrier within fifteen (15) days or unless a suit is instituted within thirty (30) days from the day the Passenger disembarks or from the day the vessel arrives at the Passenger's port of destination, whichever is earlier.</li>
                    
                    <li>Passengers can bring two (2) 0.05 cubic meter in size or 100 kilos of baggage on board, on 2nd class and tourist accommodations. Private room and cabin passengers have double allowance in terms of quantity but not in size. Minor's allowance is half in size that of an adult. Baggage in excess of allowance will be deemed as cargo and will be treated as such and charged accordingly.</li>
                    
                    <li>Carrier reserves the right to refuse boarding to Passenger/s who pose a threat to the security, order, comfort, safety & health of other passengers and the vessel and Passenger/s whose payment is made through fraudulent means.</li>
                    
                    <li>Sick Passengers must present a medical certificate dated five (5) days within departure date, attesting to their fitness to undertake sea travel. Non-ambulatory cases, especially those with life support, should be accompanied by a licensed nurse/doctor companion with enough supply of medication for the duration of the trip. Carrier reserved the right to deny boarding of a sick passenger.</li>
                    
                    <li>Pregnant Passengers within 1 to 6 months (up to 28 weeks) are required to present a medical certificate issued at least the day prior the departure date attesting to their fitness to travel by boat indicated with the specific date of departure. 7 months and beyond (29 weeks and beyond) are no longer accepted for sea travel.</li>
                    
                    <li>Passengers below three (3) years old are considered infants. Passengers who are between three (3) to eleven (11) years of age but below one meter in height are considered minors.</li>
                    
                    <li>Carrier is not responsible to replace lost Passage Sales Invoice. Passage Official Receipt mutilated beyond recognition shall not be accepted for check-in. Passenger will have to purchase a new ticket.</li>
                    
                    <li>Ticket may be rescheduled or refunded subject to applicable surcharge at the issuing ticket outlet or at Trans-Asia Cebu-Main offices, provided that the Passenger named therein presents his complete set of ticket and a photocopy of valid ID (with picture) as proof of identity, and that the ticket has not yet expired or lapsed sixty (60) days from departure date. Ticket rescheduling can only be done once and is subject to fare rates prevailing at the time of rescheduling.</li>
                    
                    <li>In case the vessel cannot continue or complete the voyage for any cause whatsoever, Carrier reserves the right to cancel the trip and refund the Passenger the unused cost of said ticket or reschedule for another date/destination.</li>
                    
                    <li>Sailing schedule of the vessel is not guaranteed and may change between the date of purchase and the date of travel. Carrier will exert reasonable efforts to notify affected Passengers of any change of the sailing schedule, but will not be liable in any way for any loss or damage that may be incurred as a result of such change.</li>
                    
                    <li>Carrier may cancel, terminate, or delay any departing vessel or suspend the operation at any time after a reservation has been made.</li>
                    
                    <li>Carrier is not responsible for any connecting trip of the Passenger or for any misconnection arising from any delay or cancellation of the scheduled trip.</li>
                    
                    <li>Carrier reserves the right to deploy another vessel without prior notice. Affected accommodations will be automatically downgraded should there be no available accommodations, and the fare difference will be refunded to the Passenger. In the event all accommodations are fully booked, Passenger agrees to be refunded in full.</li>
                    
                    <li>Any unauthorized alteration of this ticket shall render the same null and void.</li>
                </ol>
            </div>
            <div class="modal-footer">
                <button class="btn-close-modal" onclick="closeRulesModal()">Close</button>
            </div>
        </div>
    </div>

    <script>
        function openRulesModal(event) {
            event.preventDefault();
            document.getElementById('rulesModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeRulesModal() {
            document.getElementById('rulesModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('rulesModal');
            if (event.target == modal) {
                closeRulesModal();
            }
        }
    </script>
</body>
</html>